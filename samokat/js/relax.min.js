var e,o;e="undefined"!=typeof window?window:global,o=function(){var d=function(e,o){var u=Object.create(d.prototype),r=0,f=0,i=0,w=0,h=[],x=!0,t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)},n=null,l=window.cancelAnimationFrame||window.mozCancelAnimationFrame||clearTimeout,a=window.transformProp||function(){var e=document.createElement("div");if(null===e.style.transform){var o,t=["Webkit","Moz","ms"];for(o in t)if(void 0!==e.style[t[o]+"Transform"])return t[o]+"Transform"}return"transform"}();u.options={speed:-2,center:!1,wrapper:null,relativeToWrapper:!1,round:!0,vertical:!0,horizontal:!1,callback:function(){}},o&&Object.keys(o).forEach(function(e){u.options[e]=o[e]});var s="string"==typeof(e=e||".rellax")?document.querySelectorAll(e):[e];if(0<s.length){if(u.elems=s,u.options.wrapper&&!u.options.wrapper.nodeType){if(!(s=document.querySelector(u.options.wrapper)))return void console.warn("Rellax: The wrapper you're trying to use doesn't exist.");u.options.wrapper=s}var y=function(){for(var e=0;e<h.length;e++)u.elems[e].style.cssText=h[e].style;for(h=[],f=window.innerHeight,w=window.innerWidth,g(),e=0;e<u.elems.length;e++){var o=u.elems[e],t=o.getAttribute("data-rellax-percentage"),n=o.getAttribute("data-rellax-speed"),r=o.getAttribute("data-rellax-zindex")||0,i=o.getAttribute("data-rellax-min"),l=o.getAttribute("data-rellax-max"),a=u.options.wrapper?u.options.wrapper.scrollTop:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;u.options.relativeToWrapper&&(a=(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)-u.options.wrapper.offsetTop);var s=u.options.vertical&&(t||u.options.center)?a:0,p=u.options.horizontal&&(t||u.options.center)?u.options.wrapper?u.options.wrapper.scrollLeft:window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft:0;a=s+o.getBoundingClientRect().top;var d=o.clientHeight||o.offsetHeight||o.scrollHeight,c=p+o.getBoundingClientRect().left,m=o.clientWidth||o.offsetWidth||o.scrollWidth;s=t||(s-a+f)/(d+f),t=t||(p-c+w)/(m+w),u.options.center&&(s=t=.5),n=n||u.options.speed,t=v(t,s,n),s="",0<=(o=o.style.cssText).indexOf("transform")&&(s=o.indexOf("transform"),s=(p=(s=o.slice(s)).indexOf(";"))?" "+s.slice(11,p).replace(/\s/g,""):" "+s.slice(11).replace(/\s/g,"")),h.push({baseX:t.x,baseY:t.y,top:a,left:c,height:d,width:m,speed:n,style:o,transform:s,zindex:r,min:i,max:l})}x&&(window.addEventListener("resize",y),x=!1),b()},g=function(){var e=r,o=i;return r=u.options.wrapper?u.options.wrapper.scrollTop:(document.documentElement||document.body.parentNode||document.body).scrollTop||window.pageYOffset,i=u.options.wrapper?u.options.wrapper.scrollLeft:(document.documentElement||document.body.parentNode||document.body).scrollLeft||window.pageXOffset,u.options.relativeToWrapper&&(r=((document.documentElement||document.body.parentNode||document.body).scrollTop||window.pageYOffset)-u.options.wrapper.offsetTop),!!(e!=r&&u.options.vertical||o!=i&&u.options.horizontal)},v=function(e,o,t){var n={};return e=100*t*(1-e),o=100*t*(1-o),n.x=u.options.round?Math.round(e):Math.round(100*e)/100,n.y=u.options.round?Math.round(o):Math.round(100*o)/100,n},p=function(){g()&&!1===x&&b(),n=t(p)},b=function(){for(var e,o=0;o<u.elems.length;o++){var t=(e=v((i-h[o].left+w)/(h[o].width+w),(r-h[o].top+f)/(h[o].height+f),h[o].speed)).y-h[o].baseY,n=e.x-h[o].baseX;null!==h[o].min&&(u.options.vertical&&!u.options.horizontal&&(t=t<=h[o].min?h[o].min:t),u.options.horizontal&&!u.options.vertical&&(n=n<=h[o].min?h[o].min:n)),null!==h[o].max&&(u.options.vertical&&!u.options.horizontal&&(t=t>=h[o].max?h[o].max:t),u.options.horizontal&&!u.options.vertical&&(n=n>=h[o].max?h[o].max:n)),u.elems[o].style[a]="translate3d("+(u.options.horizontal?n:"0")+"px,"+(u.options.vertical?t:"0")+"px,"+h[o].zindex+"px) "+h[o].transform}u.options.callback(e)};return u.destroy=function(){for(var e=0;e<u.elems.length;e++)u.elems[e].style.cssText=h[e].style;x||(window.removeEventListener("resize",y),x=!0),l(n),n=null},y(),p(),u.refresh=y,u}console.warn("Rellax: The elements you're trying to select don't exist.")};return d},"function"==typeof define&&define.amd?define([],o):"object"==typeof module&&module.exports?module.exports=o():e.Rellax=o();